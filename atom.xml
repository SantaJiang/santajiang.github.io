<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Santa的博客</title>
  
  
  <link href="https://santajiang.github.io/atom.xml" rel="self"/>
  
  <link href="https://santajiang.github.io/"/>
  <updated>2022-01-04T10:04:00.728Z</updated>
  <id>https://santajiang.github.io/</id>
  
  <author>
    <name>蒋胜达</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>LeetCode1.两数之和</title>
    <link href="https://santajiang.github.io/article/58186276.html"/>
    <id>https://santajiang.github.io/article/58186276.html</id>
    <published>2022-01-04T08:04:00.000Z</published>
    <updated>2022-01-04T10:04:00.728Z</updated>
    
    <content type="html"><![CDATA[<p>今天要在博客开一个新的分类，记录我刷LeetCode过程中的一些心得体会  </p><p>希望这个系列能好好做下去，也希望通过这种记录的形式给自己持续刷下去的动力  </p><p>刷题经验为0，也预料到未来可能会很困难，但千里之行，始于脚下，就从这篇开始吧！  <span id="more"></span></p><h1 id="两数之和"><a href="#两数之和" class="headerlink" title="两数之和"></a><a href="https://leetcode-cn.com/problems/two-sum/description/">两数之和</a></h1><table><thead><tr><th align="center">Category</th><th align="center">Difficulty</th><th align="center">Likes</th><th align="center">Dislikes</th></tr></thead><tbody><tr><td align="center">algorithms</td><td align="center">Easy (52.24%)</td><td align="center">13056</td><td align="center">-</td></tr></tbody></table><details open style="color: rgb(0, 0, 0); font-family: -apple-system, system-ui, &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, system-ui, Ubuntu, &quot;Droid Sans&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary><strong>Tags</strong></summary><p style="margin-top: 0px; margin-bottom: 0.7em;"><a href="https://leetcode.com/tag/array" title="https://leetcode.com/tag/array" style="color: var(--vscode-textLink-foreground); text-decoration: none;"><code style="color: var(--vscode-textLink-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">array</code></a><span>&nbsp;</span>|<span>&nbsp;</span><a href="https://leetcode.com/tag/hash-table" title="https://leetcode.com/tag/hash-table" style="color: var(--vscode-textLink-foreground); text-decoration: none;"><code style="color: var(--vscode-textLink-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">hash-table</code></a></p></details><details open style="color: rgb(0, 0, 0); font-family: -apple-system, system-ui, &quot;Segoe WPC&quot;, &quot;Segoe UI&quot;, system-ui, Ubuntu, &quot;Droid Sans&quot;, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary><strong>Companies</strong></summary><p style="margin-top: 0px; margin-bottom: 0.7em;"><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">adobe</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">airbnb</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">amazon</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">apple</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">bloomberg</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">dropbox</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">facebook</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">linkedin</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">microsoft</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">uber</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">yahoo</code><span>&nbsp;</span>|<span>&nbsp;</span><code style="color: var(--vscode-textPreformat-foreground); font-family: var(--vscode-editor-font-family, &quot;SF Mono&quot;, Monaco, Menlo, Consolas, &quot;Ubuntu Mono&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Courier New&quot;, monospace); font-size: 1em; line-height: 1.357em; white-space: pre-wrap;">yelp</code></p></details><p>给定一个整数数组 <code>nums</code> 和一个整数目标值 <code>target</code>，请你在该数组中找出 <strong>和为目标值</strong> <em><code>target</code></em> 的那 <strong>两个</strong> 整数，并返回它们的数组下标。</p><p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</p><p>你可以按任意顺序返回答案。</p><p><strong>示例 1：</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [2,7,11,15], target = 9</span><br><span class="line">输出：[0,1]</span><br><span class="line">解释：因为 nums[0] + nums[1] == 9 ，返回 [0, 1] 。</span><br></pre></td></tr></table></figure><p><strong>示例 2：</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [3,2,4], target = 6</span><br><span class="line">输出：[1,2]</span><br></pre></td></tr></table></figure><p><strong>示例 3：</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [3,3], target = 6</span><br><span class="line">输出：[0,1]</span><br></pre></td></tr></table></figure><p><strong>提示：</strong></p><ul><li><code>2 &lt;= nums.length &lt;= 104</code></li><li><code>-109 &lt;= nums[i] &lt;= 109</code></li><li><code>-109 &lt;= target &lt;= 109</code></li><li><strong>只会存在一个有效答案</strong></li></ul><h1 id="我的解题"><a href="#我的解题" class="headerlink" title="我的解题"></a>我的解题</h1><p>思考后我给出的解法是这样的：  </p><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; nums.<span class="built_in">size</span>(); j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(j == i)  <span class="comment">//数组内两个元素不能重复使用</span></span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(nums[i] + nums[j] == target)</span><br><span class="line">                &#123;</span><br><span class="line">                    vec.<span class="built_in">push_back</span>(i);</span><br><span class="line">                    vec.<span class="built_in">push_back</span>(j);</span><br><span class="line">                    <span class="keyword">return</span> vec;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> vec;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>两个for循环，第一个循环管第一个数，第二个循环管第二个数，然后通过<code>j == i</code>的判断规避“重复使用”的题目限制  </p><p>结果通过了，但是执行效果不太好：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">执行用时：808 ms, 在所有 C++ 提交中击败了5.04%的用户</span><br><span class="line">内存消耗：10 MB, 在所有 C++ 提交中击败了60.94%的用户</span><br><span class="line">通过测试用例：57 / 57</span><br></pre></td></tr></table></figure><h1 id="官方题解"><a href="#官方题解" class="headerlink" title="官方题解"></a>官方题解</h1><p><strong>方法一：</strong>枚举数组中的每一个数 <code>x</code>，寻找数组中是否存在 <code>target - x</code>  </p><p><strong>我：</strong>跟我的思路差不多，我判断的是和，官方的是差值，也是两个for循环遍历；但是在题解里看到了<code>return &#123;i, j&#125;</code>这种用法，原来还可以直接return花括号当vector，学习了···</p><p><strong>方法二：</strong>通过哈希表来解决，这里又分成了两遍哈希表和一遍哈希表</p><p><strong>我：</strong>两遍哈希表就是新建一个HashMap，然后把数组和它的角标按照<code>nums[i],i</code>的形式存起来，然后再来for循环查这个map，相当于把遍历方法的第二个for变成了从映射表里查找对应元素；一遍哈希表则是在两遍哈希表的基础上改进，在用for循环初始化哈希表的时候，顺带就判断了存不存在符合的元素，初始化一遍完了也判断完了，结果就出来了，这个方法不错  </p><h1 id="我的改进"><a href="#我的改进" class="headerlink" title="我的改进"></a>我的改进</h1><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">vector&lt;<span class="keyword">int</span>&gt; <span class="title">twoSum</span><span class="params">(vector&lt;<span class="keyword">int</span>&gt;&amp; nums, <span class="keyword">int</span> target)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        vector&lt;<span class="keyword">int</span>&gt; vec;</span><br><span class="line">        map&lt;<span class="keyword">int</span>,<span class="keyword">int</span>&gt; a;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.<span class="built_in">size</span>(); i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a.<span class="built_in">count</span>(target - nums[i]) &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                vec.<span class="built_in">push_back</span>(a[target - nums[i]]); <span class="comment">//第1个元素下标</span></span><br><span class="line">                vec.<span class="built_in">push_back</span>(i); <span class="comment">//第2个元素下标</span></span><br><span class="line">                <span class="keyword">return</span> vec;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            a[nums[i]] = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> vec;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>在进行迭代并将元素插入到表中的同时，我们还会回过头来检查表中是否已经存在当前元素所对应的目标元素。如果它存在，那我们已经找到了对应解，并立即将其返回。最后的效果不错：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">执行用时：8 ms, 在所有 C++ 提交中击败了92.55%的用户</span><br><span class="line">内存消耗：10.9 MB, 在所有 C++ 提交中击败了14.31%的用户</span><br><span class="line">通过测试用例：57 / 57</span><br></pre></td></tr></table></figure><h3 id="一些思考"><a href="#一些思考" class="headerlink" title="一些思考"></a>一些思考</h3><p>那么为什么这个<code>a[nums[i]] = i</code>放在了判断的后边呢，是为了防止出现某个数组元素和target数值是一个倍数的关系。比如给的是<code>[3,2,4]</code>,而target是6的话，那么在第一遍判断的时候，a就会存在一个<code>3,0</code>的元素，而此时<code>target - nums[0]</code>正好是<code>6-3=3</code>，就满足了if的条件，导致了逻辑的错误；而又因为新增元素放到了判断的下边，每次i++的时候都会先判断，所以第2个元素下标就不能从哈希表里拿了，可以直接用i来表示就行。  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;今天要在博客开一个新的分类，记录我刷LeetCode过程中的一些心得体会  &lt;/p&gt;
&lt;p&gt;希望这个系列能好好做下去，也希望通过这种记录的形式给自己持续刷下去的动力  &lt;/p&gt;
&lt;p&gt;刷题经验为0，也预料到未来可能会很困难，但千里之行，始于脚下，就从这篇开始吧！&lt;/p&gt;</summary>
    
    
    
    <category term="刷题" scheme="https://santajiang.github.io/categories/%E5%88%B7%E9%A2%98/"/>
    
    
    <category term="LeetCode" scheme="https://santajiang.github.io/tags/LeetCode/"/>
    
    <category term="C++" scheme="https://santajiang.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>软件配置存读功能开发</title>
    <link href="https://santajiang.github.io/article/aa3a8158.html"/>
    <id>https://santajiang.github.io/article/aa3a8158.html</id>
    <published>2021-12-30T16:00:00.000Z</published>
    <updated>2022-01-04T07:08:40.349Z</updated>
    
    <content type="html"><![CDATA[<p>开发项目的时候，经常会遇到需要存读软件配置的情景，一般用的就是单例，然后再加上QFile，将单例类里的成员存成文件；或从文件里读取再加载到单例类里，也就是俗称的“从内存到文件，从文件到内存”  <span id="more"></span></p><p>这里介绍一种配置存读的扩展形式，就是怎么设计多种配置文件形式的输出，又怎么在项目的其他模块使用的流程  </p><p>基本流程是：首先实现一个配置存读的基类，由此延伸出针对json/ini/xml等数据格式处理的子类；使用时，调用<code>基类::getInstance().存</code>或<code>基类::getInstance().读</code>即可，下面贴上三个类的示例</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h5 id="1-基类"><a href="#1-基类" class="headerlink" title="1.基类"></a>1.基类</h5><p>SysConfig.h</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include &lt;QMutex&gt;</span><br><span class="line"></span><br><span class="line">class GLOBALSHARED_EXPORT <span class="title">SysConfig</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">protected</span>:</span><br><span class="line">    SysConfig();</span><br><span class="line"><span class="attribute">public</span>:</span><br><span class="line">    virtual ~SysConfig();</span><br><span class="line">    static SysConfig&amp; getInstance();</span><br><span class="line">    virtual <span class="keyword">void</span> readConfig() = <span class="number">0</span>;</span><br><span class="line">    virtual <span class="keyword">void</span> writeConfig() = <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line"><span class="attribute">private</span>:</span><br><span class="line">    static QMutex mutex;</span><br><span class="line">    static SysConfig* m_pConfig;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p>SysConfig.cpp</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include <span class="string">&quot;sysconfig.h&quot;</span></span><br><span class="line">SysConfig* <span class="attribute">SysConfig</span>::m_pConfig = nullptr;</span><br><span class="line">QMutex <span class="attribute">SysConfig</span>::mutex;</span><br><span class="line"></span><br><span class="line"><span class="attribute">SysConfig</span>::SysConfig()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">SysConfig</span>::~SysConfig()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SysConfig&amp; <span class="attribute">SysConfig</span>::getInstance()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(m_pConfig == nullptr)</span><br><span class="line">    &#123;</span><br><span class="line">        mutex.lock();</span><br><span class="line">        <span class="keyword">if</span>(m_pConfig == nullptr)</span><br><span class="line">        &#123;</span><br><span class="line">            m_pConfig = <span class="keyword">new</span> SysConfig();</span><br><span class="line">        &#125;</span><br><span class="line">        mutex.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> m_pConfig;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><p>这里的单例用的是双重检查锁模式</p><h5 id="2-子类"><a href="#2-子类" class="headerlink" title="2.子类"></a>2.子类</h5><p>首先是Json形式的存读： </p><p>JsonConfig.h</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include <span class="string">&quot;sysconfig.h&quot;</span></span><br><span class="line"></span><br><span class="line">class <span class="attribute">JsonConfig</span> : public <span class="title">SysConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    friend class SysConfig;</span><br><span class="line"><span class="attribute">private</span>:</span><br><span class="line">    JsonConfig();</span><br><span class="line"><span class="attribute">public</span>:</span><br><span class="line">    virtual ~JsonConfig();</span><br><span class="line">    <span class="keyword">void</span> readConfig();</span><br><span class="line">    <span class="keyword">void</span> writeConfig();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p>JsonConfig.cpp</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include <span class="string">&quot;JsonConfig.h&quot;</span></span><br><span class="line">#include &lt;QJsonDocument&gt;</span><br><span class="line">#include &lt;QJsonObject&gt;</span><br><span class="line">#include &lt;QJsonValue&gt;</span><br><span class="line">#include &lt;QFile&gt;</span><br><span class="line"></span><br><span class="line"><span class="attribute">JsonConfig</span>::JsonConfig()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">JsonConfig</span>::~JsonConfig()</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="attribute">JsonConfig</span>::readConfig()</span><br><span class="line">&#123;</span><br><span class="line">    QFile file(m_strPath+<span class="string">&quot;//Config.json&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(!file.open(<span class="attribute">QFile</span>::ReadOnly | <span class="attribute">QFile</span>::Text))</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">    QJsonDocument doc = <span class="attribute">QJsonDocument</span>::fromJson(file.readAll());</span><br><span class="line">    <span class="keyword">if</span> (!doc.isObject())</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    QJsonObject obj = doc.object();<span class="comment">//这个obj就是读到的配置了</span></span><br><span class="line">    ···</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="attribute">JsonConfig</span>::writeConfig()</span><br><span class="line">&#123;</span><br><span class="line">    QJsonObject obj;</span><br><span class="line">    ···</span><br><span class="line">    <span class="comment">//保存到json文件</span></span><br><span class="line">    QJsonDocument doc(obj);</span><br><span class="line">    QFile file(软件根目录+<span class="string">&quot;//Config.json&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (!file.open(<span class="attribute">QIODevice</span>::ReadWrite | <span class="attribute">QIODevice</span>::Truncate | <span class="attribute">QIODevice</span>::Text))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    file.write(doc.toJson());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><p>然后也可以用ini的方式来存读：</p><p>IniConfig.h</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include <span class="string">&quot;sysconfig.h&quot;</span></span><br><span class="line"></span><br><span class="line">class <span class="attribute">IniConfig</span> : public <span class="title">SysConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    friend class SysConfig;</span><br><span class="line"><span class="attribute">private</span>:</span><br><span class="line">    IniConfig();</span><br><span class="line"><span class="attribute">public</span>:</span><br><span class="line">    virtual ~IniConfig();</span><br><span class="line">    <span class="keyword">void</span> readConfig();</span><br><span class="line">    <span class="keyword">void</span> writeConfig();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></div></details><p>IniConfig.cpp</p><details open><summary>代码</summary><div class="fold-content"><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include <span class="string">&quot;iniconfig.h&quot;</span></span><br><span class="line">#include &lt;QSettings&gt;</span><br><span class="line"></span><br><span class="line"><span class="attribute">IniConfig</span>::IniConfig()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">IniConfig</span>::~IniConfig()</span><br><span class="line">&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="attribute">IniConfig</span>::readConfig()</span><br><span class="line">&#123;</span><br><span class="line">      QSettings cfg(软件根目录+<span class="string">&quot;//Config.ini&quot;</span>, <span class="attribute">QSettings</span>::IniFormat);</span><br><span class="line">    </span><br><span class="line">      QString strIP = cfg.value(<span class="string">&quot;DatabaseServer/IP&quot;</span>).toString();</span><br><span class="line">      QString strPort = cfg.value(<span class="string">&quot;DatabaseServer/Port&quot;</span>).toInt();</span><br><span class="line">      ···</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="attribute">IniConfig</span>::writeConfig()</span><br><span class="line">&#123;</span><br><span class="line">    QSettings cfg(软件根目录+<span class="string">&quot;//Config.ini&quot;</span>, <span class="attribute">QSettings</span>::IniFormat);</span><br><span class="line">    ···</span><br><span class="line">    cfg.beginGroup(<span class="string">&quot;DatabaseServer&quot;</span>);</span><br><span class="line">    cfg.setValue(<span class="string">&quot;IP&quot;</span>, strIP);</span><br><span class="line">    cfg.setValue(<span class="string">&quot;Port&quot;</span>, strPort);</span><br><span class="line">    cfg.endGroup();</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//或者，也可以这样设置：</span></span><br><span class="line">    cfg.setValue(<span class="string">&quot;DatabaseServer/IP&quot;</span>, strIP);</span><br><span class="line">    cfg.setValue(<span class="string">&quot;DatabaseServer/Port&quot;</span>, strPort);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></details><p>xml也同理，这里就不展开讲了</p><h5 id="3-使用"><a href="#3-使用" class="headerlink" title="3.使用"></a>3.使用</h5><p>用法就比较简单了。用<code>SysConfig::getInstance().readConfig()</code>来读取配置；设置数据到配置类内后，用<code>SysConfig::getInstance().writeConfig()</code>来保存配置</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;开发项目的时候，经常会遇到需要存读软件配置的情景，一般用的就是单例，然后再加上QFile，将单例类里的成员存成文件；或从文件里读取再加载到单例类里，也就是俗称的“从内存到文件，从文件到内存”&lt;/p&gt;</summary>
    
    
    
    <category term="开发笔记" scheme="https://santajiang.github.io/categories/%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Qt" scheme="https://santajiang.github.io/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>Cards主题添加Gitalk遇坑记录</title>
    <link href="https://santajiang.github.io/article/a8094cf7.html"/>
    <id>https://santajiang.github.io/article/a8094cf7.html</id>
    <published>2021-12-23T16:00:00.000Z</published>
    <updated>2022-01-04T02:24:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天准备给Cards主题加评论系统的时候，遇到了一个坑，在此记录一下  </p><span id="more"></span><p>首先就是配置文件这块，我没看到任何一处提示repo只写仓库名的，在试了很多次之后才发现直接写名字就可以，而Next主题就是：SantaJiang/gitalk  </p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Gitalk</span></span><br><span class="line">  <span class="attr">gitalk:</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">gitalk</span></span><br><span class="line">    <span class="attr">owner:</span> <span class="string">SantaJiang</span></span><br><span class="line">    <span class="attr">clientID:</span> <span class="string">a976c3************89f723</span></span><br><span class="line">    <span class="attr">clientSecret:</span> <span class="string">f186b52519d********898cd1787c6d3223362</span></span><br></pre></td></tr></table></figure><p>然后坑就来了，我在配置好之后，gitalk提示我本人登陆授权，我登录之后，就提示<code>Error:Validation Failed</code>  </p><p>最后是通过元素审查，筛选网络请求，发现gitalk在访问issues的时候被拒绝了，拒绝的原因是name。我就困惑了，然后去翻gitalk的issues，终于在<a href="https://github.com/gitalk/gitalk/issues/102">issue#102</a>发现了问题的原因，是因为gitalk把我当前文章的URL，凡是带中文的全都转义成了字符，就导致我的每一篇文章都是一大长串，而GitHub限制URL的长度为50，导致了问题的发生.  </p><p>最后的解决就是，缩短文章URL的长度，第一种方法是给gitalk引入MD5加密，第二种是转义一下文章，缩短长度，这里我用的是第二种方法，需要修改的就是在任何一种主题的初始化gitalk的地方，修改成这样：  </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span><br><span class="line">                    <span class="attr">clientID</span>: <span class="string">&#x27;&lt;%= theme.comments.gitalk.clientID %&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">clientSecret</span>: <span class="string">&#x27;&lt;%= theme.comments.gitalk.clientSecret %&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">repo</span>: <span class="string">&#x27;&lt;%= theme.comments.gitalk.repo %&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">owner</span>: <span class="string">&#x27;&lt;%= theme.comments.gitalk.owner %&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">admin</span>: <span class="string">&#x27;&lt;%= theme.comments.gitalk.owner %&gt;&#x27;</span>,</span><br><span class="line">                    <span class="attr">id</span>: <span class="built_in">decodeURI</span>(<span class="built_in">window</span>.location.pathname),</span><br><span class="line">                    <span class="attr">distractionFreeMode</span>: <span class="literal">false</span></span><br><span class="line">                &#125;);</span><br></pre></td></tr></table></figure><p>关键点就是id: decodeURI(window.location.pathname)，原来是没有decodeURL的，顺带提一下，Cards主题的gitalk配置文件路径是：<code>*/blog/themes/cards/layout/_plugins/comments/gitalk/source.ejs</code> </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;今天准备给Cards主题加评论系统的时候，遇到了一个坑，在此记录一下  &lt;/p&gt;</summary>
    
    
    
    <category term="博客搭建" scheme="https://santajiang.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://santajiang.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>MacOS下Qt调用终端(Terminal)</title>
    <link href="https://santajiang.github.io/article/fa7e3d73.html"/>
    <id>https://santajiang.github.io/article/fa7e3d73.html</id>
    <published>2021-12-22T16:00:00.000Z</published>
    <updated>2022-01-04T07:11:22.056Z</updated>
    
    <content type="html"><![CDATA[<p>今天遇到了一个问题，就是怎么在MacOS下用Qt调起终端，并执行一些命令<span id="more"></span>，在网上怎么都查不到方法，说什么的都有，就是没有管用的  </p><p>自己在多次尝试后终于找到了解决方案，其实很简单，直接上代码:  </p><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include &lt;QProcess&gt;</span><br><span class="line"></span><br><span class="line">QProcess pCmd = <span class="keyword">new</span> QProcess(<span class="keyword">this</span>);</span><br><span class="line">connect(pCmd , SIGNAL(readyReadStandardOutput()) , <span class="keyword">this</span> , SLOT(on_readoutput()));</span><br><span class="line">connect(pCmd , SIGNAL(readyReadStandardError()) , <span class="keyword">this</span> , SLOT(on_readerror()));</span><br><span class="line"></span><br><span class="line">pCmd-&gt;start(<span class="string">&quot;bash&quot;</span>);</span><br><span class="line">pCmd-&gt;waitForStarted();</span><br><span class="line"></span><br><span class="line">QString strTermCmd = <span class="string">&quot;git add -A&quot;</span> + <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">pCmd-&gt;write(strTermCmd.toUtf8().data());</span><br><span class="line">pCmd-&gt;waitForFinished();</span><br></pre></td></tr></table></figure><p>问题的关键就在这个<code>pCmd-&gt;start(&quot;bash&quot;);</code> ,其实早就该想到bash的，被网上的各种文章误导，还试了好久的open命令，浪费人生，在此做个记录吧</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;今天遇到了一个问题，就是怎么在MacOS下用Qt调起终端，并执行一些命令&lt;/p&gt;</summary>
    
    
    
    <category term="开发笔记" scheme="https://santajiang.github.io/categories/%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Qt" scheme="https://santajiang.github.io/tags/Qt/"/>
    
    <category term="Macos" scheme="https://santajiang.github.io/tags/Macos/"/>
    
  </entry>
  
  <entry>
    <title>RGB值与十六进制颜色值转换工具</title>
    <link href="https://santajiang.github.io/article/caeca79b.html"/>
    <id>https://santajiang.github.io/article/caeca79b.html</id>
    <published>2021-12-18T16:00:00.000Z</published>
    <updated>2022-01-04T07:11:13.430Z</updated>
    
    <content type="html"><![CDATA[<p>平时在开发时经常会遇到RGB值和十六进制颜色互转的场景，平时都是用在线的网页端，平日的麻烦也能忍，最近页面竟开始植入广告了，既然想着功能也不大，就自己实现一个吧</p><span id="more"></span><h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>首先贴上这个项目的GitHub地址：<a href="https://github.com/SantaJiang/ColorConv">https://github.com/SantaJiang/ColorConv</a><br>欢迎来点Star</p><p><img src="/../images/RGB%E5%80%BC%E4%B8%8E%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E9%A2%9C%E8%89%B2%E5%80%BC%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7/colorconv.png" alt="colorconv"></p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>页面是画了两个QLineEdit和一个QLabel，就构成了所有的要素，按钮我也不准备加，之前网页端的那个每次填好之后都得点个转换，很麻烦，既然想到这一步了，我想干脆回车直接生成结果，而且生成的结果自动的复制到剪贴板里，那就省事多了，我总共需要做的就是：输入-回车-粘贴到IDE里，就完了.</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>做起来也是比较简单的，回车生效的事件直接用的是QLineEdit自带的returnPressed()事件，而复制到剪贴板用到的是QClipboard类，用法也是很简单：  </p><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include &lt;QClipboard&gt;</span><br><span class="line"></span><br><span class="line">QString str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">QClipboard *clip = <span class="attribute">QApplication</span>::clipboard();</span><br><span class="line">clip-&gt;setText(str);</span><br></pre></td></tr></table></figure><p>这样这个”Hello”就自动复制到剪贴板里了.  </p><p>接下来最主要的就是颜色值的相互转换了，可以里用QColor类，先获取对应的color，然后再转换为对应的显示形式，这里贴上核心代码：  </p><figure class="highlight qt"><table><tr><td class="code"><pre><span class="line">#include &lt;QColor&gt;</span><br><span class="line"></span><br><span class="line">QColor <span class="built_in">color</span>(<span class="number">235</span>,<span class="number">235</span>,<span class="number">235</span>);</span><br><span class="line"><span class="built_in">int</span> red = <span class="built_in">color</span>.red();</span><br><span class="line"><span class="built_in">int</span> green = <span class="built_in">color</span>.green();</span><br><span class="line"><span class="built_in">int</span> blue = <span class="built_in">color</span>.blue();</span><br><span class="line">QString strRed = QString(<span class="string">&quot;%1&quot;</span>).arg(red &amp; <span class="number">0xFF</span>, <span class="number">2</span>, <span class="number">16</span>, QLatin1Char(<span class="string">&#x27;0&#x27;</span>));</span><br><span class="line">QString strGreen = QString(<span class="string">&quot;%1&quot;</span>).arg(green &amp; <span class="number">0xFF</span>, <span class="number">2</span>, <span class="number">16</span>, QLatin1Char(<span class="string">&#x27;0&#x27;</span>));</span><br><span class="line">QString strBlue = QString(<span class="string">&quot;%1&quot;</span>).arg(blue &amp; <span class="number">0xFF</span>, <span class="number">2</span>, <span class="number">16</span>, QLatin1Char(<span class="string">&#x27;0&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//十六进制显示</span></span><br><span class="line">QString hex = QString(<span class="string">&quot;#%1%2%3&quot;</span>).arg(strRed.toUpper()).arg(strGreen.toUpper()).arg(strBlue.toUpper());</span><br><span class="line"><span class="comment">//RGB显示</span></span><br><span class="line">QString rgb = QString(<span class="string">&quot;%1, %2, %3&quot;</span>).arg(red).arg(green).arg(blue);</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;平时在开发时经常会遇到RGB值和十六进制颜色互转的场景，平时都是用在线的网页端，平日的麻烦也能忍，最近页面竟开始植入广告了，既然想着功能也不大，就自己实现一个吧&lt;/p&gt;</summary>
    
    
    
    <category term="开发笔记" scheme="https://santajiang.github.io/categories/%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="Qt" scheme="https://santajiang.github.io/tags/Qt/"/>
    
    <category term="Macos" scheme="https://santajiang.github.io/tags/Macos/"/>
    
  </entry>
  
  <entry>
    <title>Next主题配置Utterances评论系统</title>
    <link href="https://santajiang.github.io/article/bb0f5d1f.html"/>
    <id>https://santajiang.github.io/article/bb0f5d1f.html</id>
    <published>2021-08-17T16:00:00.000Z</published>
    <updated>2021-12-31T06:50:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>在网上查找这部分教程的时候，很多教程已经过时了，因为最新版的Next默认已经不内置gitment评论系统了，我在多次配置后选用了目前Next 8+版本内置的Utterances，效果不错，配置起来相较于其他的评论系统简单很多，现写下配置流程</p><span id="more"></span><h3 id="创建Github仓库"><a href="#创建Github仓库" class="headerlink" title="创建Github仓库"></a>创建Github仓库</h3><p>需要在自己的 <strong>Github</strong> 账号下创建一个仓库来存放评论，创建的仓库名最好为<code>utterances</code>，方便后续自己识别，注意仓库为<code>public</code></p><h3 id="安装Utterances"><a href="#安装Utterances" class="headerlink" title="安装Utterances"></a>安装Utterances</h3><p>安装地址：<a href="https://github.com/apps/utterances">https://github.com/apps/utterances</a></p><p>访问安装地址，进入安装页面，单击 <code>Install</code> 按钮</p><p>接下来是一个权限的选择，可选可访问全部仓库，或者指定刚才创建的仓库</p><h3 id="配置Utterances"><a href="#配置Utterances" class="headerlink" title="配置Utterances"></a>配置Utterances</h3><p>打开/blog/themes/next/_config.yml文件，查找<strong>utterances</strong>字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Utterances</span></span><br><span class="line"><span class="comment"># For more information: https://utteranc.es</span></span><br><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">SantaJiang/utterances</span><span class="comment">#格式是 user_name/repo_name</span></span><br><span class="line">  <span class="comment"># Available values: pathname | url | title | og:title</span></span><br><span class="line">  <span class="attr">issue_term:</span> <span class="string">pathname</span></span><br><span class="line">  <span class="comment"># Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span></span><br></pre></td></tr></table></figure><p>完成后重新部署:  <code>hexo clean</code> <code>hexo g -d</code>  后查看效果</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在网上查找这部分教程的时候，很多教程已经过时了，因为最新版的Next默认已经不内置gitment评论系统了，我在多次配置后选用了目前Next 8+版本内置的Utterances，效果不错，配置起来相较于其他的评论系统简单很多，现写下配置流程&lt;/p&gt;</summary>
    
    
    
    <category term="博客搭建" scheme="https://santajiang.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://santajiang.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>将Hexo迁移至MacOS</title>
    <link href="https://santajiang.github.io/article/3e930800.html"/>
    <id>https://santajiang.github.io/article/3e930800.html</id>
    <published>2021-08-01T16:00:00.000Z</published>
    <updated>2021-12-31T06:50:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>当时用的Windows搭建的这个博客，现在要迁移到我的MacBook Pro上来，在查了很多资料后动手实践，发现还是比较方便的，现写下流程</p><span id="more"></span><h3 id="Node-js-Git"><a href="#Node-js-Git" class="headerlink" title="Node.js / Git"></a>Node.js / Git</h3><p>首先要安装Node.js与Git的环境，这里省略就不多说了</p><h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><p>将原Windows电脑上的博客复制如下的文件，并暂存起来：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">_config.yml</span><br><span class="line">package.json</span><br><span class="line">scaffolds/</span><br><span class="line">source/</span><br><span class="line">themes/</span><br></pre></td></tr></table></figure><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><blockquote><p>打开终端，当前路径均可，默认只会装在固定的位置<br>执行<code>sudo npm install -g hexo-cli</code> </p></blockquote><h3 id="初始化博客"><a href="#初始化博客" class="headerlink" title="初始化博客"></a>初始化博客</h3><p>在你想要放置博客的位置，然后操作：</p><blockquote><p>打开终端<br>执行<code>hexo init blog</code></p></blockquote><h3 id="博客迁移"><a href="#博客迁移" class="headerlink" title="博客迁移"></a>博客迁移</h3><p>将之前暂存的文件，全部替换到刚才创建的blog文件夹中，然后操作：</p><blockquote><p>打开终端<br>执行<code>npm install</code><br>执行<code>hexo g</code><br>执行<code>hexo d</code><br>查看效果</p></blockquote><p>至此博客就成功迁移到MacOS中了，后续的操作与Windows下无差别</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;当时用的Windows搭建的这个博客，现在要迁移到我的MacBook Pro上来，在查了很多资料后动手实践，发现还是比较方便的，现写下流程&lt;/p&gt;</summary>
    
    
    
    <category term="博客搭建" scheme="https://santajiang.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://santajiang.github.io/tags/Hexo/"/>
    
    <category term="Macos" scheme="https://santajiang.github.io/tags/Macos/"/>
    
  </entry>
  
  <entry>
    <title>Next主题配置</title>
    <link href="https://santajiang.github.io/article/d144b0f9.html"/>
    <id>https://santajiang.github.io/article/d144b0f9.html</id>
    <published>2021-07-29T16:00:00.000Z</published>
    <updated>2021-12-31T06:50:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>下边介绍Next主题相关的一些配置</p><span id="more"></span><h3 id="设置Next主题"><a href="#设置Next主题" class="headerlink" title="设置Next主题"></a>设置Next主题</h3><p>下载完成之后，打开/blog/_config.yml文件，查找**#Extensions**字段，修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure><p>Hexo的主题路径是/blog/themes/<br>每种主题都在其下以文件夹的形式存在，所以Hexo切换主题是很方便的，只要修改一个参数值即可<br>这里我们还没有下载next主题，可以提前先在这里写好</p><h3 id="Next主题下载"><a href="#Next主题下载" class="headerlink" title="Next主题下载"></a>Next主题下载</h3><p>Next主题的下载分为两种，<strong>npm</strong>形式和<strong>git</strong>形式，这里两种都提一下：<br><strong>1.npm</strong><br>If you’re using Hexo 5.0 or later, the simplest way to install is through npm.<br>Open your Terminal, change to Hexo site root directory and install NexT theme:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cd hexo-site</span><br><span class="line">$ npm install hexo-theme-next</span><br></pre></td></tr></table></figure><p><strong>2.git</strong><br>If you know about Git, you can clone the whole repository and update it in any time with git pull command instead of downloading archive manually.<br>Open your terminal, change to Hexo site root directory and clone the latest master branch of NexT theme:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cd hexo-site</span><br><span class="line">$ git clone https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><h3 id="Next主题类型"><a href="#Next主题类型" class="headerlink" title="Next主题类型"></a>Next主题类型</h3><p>打开/blog/themes/next/_config.yml文件，查找<strong>Scheme Settings</strong>字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Scheme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment">#scheme: Muse</span></span><br><span class="line"><span class="comment">#scheme: Mist</span></span><br><span class="line"><span class="comment">#scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Dark Mode</span></span><br><span class="line"><span class="attr">darkmode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>如上，有四种不同形式的主题可供选择，而且可以设置黑暗模式</p><h3 id="社交链接"><a href="#社交链接" class="headerlink" title="社交链接"></a>社交链接</h3><p>打开/blog/themes/next/_config.yml文件，查找<strong>Social Links</strong>字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Social Links</span></span><br><span class="line"><span class="comment"># Usage: `Key: permalink || icon`</span></span><br><span class="line"><span class="comment"># Key is the link label showing to end users.</span></span><br><span class="line"><span class="comment"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span></span><br><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/SantaJiang</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">jiangshengda@foxmail.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br><span class="line">  <span class="string">简书:</span> <span class="string">https://www.jianshu.com/u/3aa0cb901bee</span> <span class="string">||fab</span> <span class="string">fa-jianshu</span></span><br><span class="line">  <span class="attr">CSDN:</span> <span class="string">https://blog.csdn.net/jsd581?spm=1010.2135.3001.5421</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-csdn</span></span><br><span class="line">  <span class="comment">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span></span><br><span class="line">  <span class="comment">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span></span><br><span class="line">  <span class="comment">#YouTube: https://youtube.com/yourname || fab fa-youtube</span></span><br><span class="line">  <span class="comment">#Instagram: https://instagram.com/yourname || fab fa-instagram</span></span><br><span class="line">  <span class="comment">#Skype: skype:yourname?call|chat || fab fa-skype</span></span><br></pre></td></tr></table></figure><p>最后的成品效果就是我左侧头像下边的链接。</p><h3 id="捐赠"><a href="#捐赠" class="headerlink" title="捐赠"></a>捐赠</h3><p>捐赠就是在我的每篇文章下边都会有的一个按钮，点开了之后就会弹出我的微信/支付宝转账页面，如果有读者喜欢这篇文章就可以通过捐赠来支持作者</p><p>同样的，打开/blog/themes/next/_config.yml文件，查找<strong>Donate (Sponsor) settings</strong>字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Donate (Sponsor) settings</span></span><br><span class="line"><span class="comment"># Front-matter variable (unsupport animation).</span></span><br><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="comment"># If true, a donate button will be displayed in every article by default.</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">comment:</span> <span class="string">赞赏文章</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">wechatpay:</span> <span class="string">/images/wechat.JPG</span></span><br><span class="line">  <span class="comment">#alipay: /images/alipay.png</span></span><br><span class="line">  <span class="comment">#paypal: /images/paypal.png</span></span><br><span class="line">  <span class="comment">#bitcoin: /images/bitcoin.png</span></span><br></pre></td></tr></table></figure><h3 id="字体调整"><a href="#字体调整" class="headerlink" title="字体调整"></a>字体调整</h3><p>Next主题自带的字体是较大的，看起来有一些愣，我在多次调整后给出了一个比较合适的方案：<br>1.打开/blog/themes/next/source/css/_variables/base.styl文件，查找<strong>Font size</strong>字段，将**$font-size-large<strong>参数由1.125em改为1.0em<br>2.打开/blog/themes/next/_config.yml文件，查找</strong>Font Settings**字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Font Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Find fonts on Google Fonts (https://fonts.google.com)</span></span><br><span class="line"><span class="comment"># All fonts set here will have the following styles:</span></span><br><span class="line"><span class="comment">#   light | light italic | normal | normal italic | bold | bold italic</span></span><br><span class="line"><span class="comment"># Be aware that setting too much fonts will cause site running slowly</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Web Safe fonts are recommended for `global` (and `title`):</span></span><br><span class="line"><span class="comment"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span></span><br><span class="line">  <span class="attr">host:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font options:</span></span><br><span class="line">  <span class="comment"># `external: true` will load this font family from `host` above.</span></span><br><span class="line">  <span class="comment"># `family: Times New Roman`. Without any quotes.</span></span><br><span class="line">  <span class="comment"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Global font settings used for all elements inside &lt;body&gt;.</span></span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Lato</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for site title (.site-title).</span></span><br><span class="line">  <span class="attr">title:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for headlines (&lt;h1&gt; to &lt;h6&gt;).</span></span><br><span class="line">  <span class="attr">headings:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for posts (.post-body).</span></span><br><span class="line">  <span class="attr">posts:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span> <span class="number">0.8125</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Font settings for &lt;code&gt; and code blocks.</span></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">family:</span></span><br><span class="line">    <span class="attr">size:</span></span><br></pre></td></tr></table></figure><h3 id="访问统计"><a href="#访问统计" class="headerlink" title="访问统计"></a>访问统计</h3><p>访问统计设置完成后会出现在文章的副标题以及网站的底部<br>打开/blog/themes/next/_config.yml文件，查找**busuanzi_count:**字段并修改如下：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Show Views / Visitors of the website / page with busuanzi.</span></span><br><span class="line"><span class="comment"># For more information: http://ibruce.info/2015/04/04/busuanzi/</span></span><br><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">far</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure><p>至此完毕，重新部署后查看页面效果</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;下边介绍Next主题相关的一些配置&lt;/p&gt;</summary>
    
    
    
    <category term="博客搭建" scheme="https://santajiang.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://santajiang.github.io/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hexo搭建个人博客</title>
    <link href="https://santajiang.github.io/article/ec7d7221.html"/>
    <id>https://santajiang.github.io/article/ec7d7221.html</id>
    <published>2021-07-27T16:00:00.000Z</published>
    <updated>2021-12-31T06:50:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>搭建时踩了很多坑，最主要的是很多文章的时效性不能保障了，按照文章的方法不能成功走完下来，特在此记录下最新的搭建流程，后续如有必要会持续更新</p><span id="more"></span><p>读本教程需要有基础的Git及Github操作经验，用Hexo写博文需要对MarkDown语法有一定了解 </p><h3 id="Github-Pages"><a href="#Github-Pages" class="headerlink" title="Github Pages"></a>Github Pages</h3><p>Github Pages是Github推出的一项网站服务，有关Pages的核心就一点：**创建一个名为username.github.io的仓库。Github会自动识别为一个网站，网站的url就是username.github.io **</p><p>操作起来也很简单，<strong>步骤如下：</strong></p><ul><li>在Gtihub新建一个repository</li><li>在第一栏，<strong>Owner</strong>要选<strong>自己</strong>，<strong>Repository name</strong>填<strong>username.github.io</strong>，username就是你Github的用户名</li><li>可见性选Public，因为Pages free的账号只能public，有钱可以选Private，然后在新建之后的仓库Setting里，左侧栏选Pages，里边有升级成Pages Pro的选项，这样你的网站项目就可以隐藏，但每年要支付一定的费用</li><li>勾选 <strong>Initialize this repository with a README</strong></li><li>点<code>Create repository</code>按钮新建仓库</li></ul><p>此时你便拥有了自己的Pages个人主页，可以尝试输入网址打开看看，这个生成好的 Repository 就是用来存放博客内容的地方</p><h3 id="绑定个人域名"><a href="#绑定个人域名" class="headerlink" title="绑定个人域名"></a>绑定个人域名</h3><p>如果你有一个个人域名，也可以在Repository-Settings-Pages里的<strong>Custom domain</strong>选项填上自己的个人域名，这样你的Pages就和你的个人域名绑定了，输入你的域名就会自动跳转到你个人的Pages</p><h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h3><p>生成 Repository之后，接下来就是要往这个Repository 里搭博客了</p><p>Hexo是一款本地博客框架，可以运行一个本地的静态博客网站，如果你只需要在自己电脑用，那就不用Pages了</p><p>Hexo使用起来很方便，只要在本地编辑好.md后缀的文章，然后重新部署就可以了，而且Hexo官网提供了大量的主题模板</p><p><strong>1.搭建Node.js环境</strong></p><ul><li>前往 <a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li><li>下载最新LTS版本</li><li>安装</li><li>打开<strong>Command Prompt</strong>，输入 <code>node -v</code></li><li>显示版本号</li><li>成功</li></ul><p><strong>2.安装Hexo</strong></p><ul><li>打开<strong>Command Prompt</strong></li><li>执行<code>npm install -g hexo-cli</code> </li><li>输入 <code>hexo -v</code>查看版本即安装成功</li></ul><p><strong>3.Hexo的初始化</strong></p><ul><li>创建blog文件夹，位置建议各盘根目录</li><li>打开任一终端(PowerShell/Windows Terminal/Git Bash等均可)，进入刚才创建的blog路径下</li><li>执行<code>hexo init</code> 将 blog 文件夹初始化</li><li>执行 <code>npm install</code> 安装依赖包</li><li>执行 <code>hexo g</code> 开始进行部署操作</li><li>执行 <code>hexo s</code> 将生成的网页放在本地服务器</li><li>打开浏览器，输入网址 <a href="http://localhost:4000/">http://localhost:4000/</a> 就可以看到本地的博客效果了</li><li>效果没问题，返回终端按 <code>Ctrl</code> + <code>C</code> 中止服务运行</li></ul><p><strong>4.发布博客文章</strong><br>发布博客文章也是较为简单的，需要在本地新建一个博客文档，打开本地进行编辑后，重新部署发布即可，操作如下：</p><ul><li>打开刚才的终端</li><li>在blog路径下执行 <code>hexo new &quot;Test&quot;</code></li><li>生成的.md文件路径在 <code>blog\source\_posts</code>下</li></ul><p>打开Test.md，会发现Hexo已经为我们生成了一个表头，表头的格式如下  </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title: Test                       //文章标题</span><br><span class="line">date: 2021-0X-XX XX:XX:XX         //生成日期</span><br><span class="line">tags:                             //所属标签</span><br></pre></td></tr></table></figure><p>然后，在其下随便写一些内容，保存<br>回到终端，执行<code>hexo g</code>部署，然后执行 <code>hexo s</code>发布，刷新 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看结果</p><h3 id="在-Github-上部署-Hexo"><a href="#在-Github-上部署-Hexo" class="headerlink" title="在 Github 上部署 Hexo"></a>在 Github 上部署 Hexo</h3><p><strong>操作如下</strong>：</p><ul><li>复制Github Pages的仓库地址，如：<a href="https://github.com/SantaJiang/santajiang.github.io.git">https://github.com/SantaJiang/santajiang.github.io.git</a></li><li>修改配置文件<code>blog/_config.yml</code> ，最新版与之前的不同从这里开始了</li><li>查找**# Site**字段，修改如下：  </li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Santa的博客</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;My personal blog&#x27;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;记录、分享、交流&#x27;</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">蒋胜达</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">en</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>查找**# URL**字段，修改如下：  </li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://santajiang.github.io/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"><span class="attr">pretty_urls:</span></span><br><span class="line">  <span class="attr">trailing_index:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class="line">  <span class="attr">trailing_html:</span> <span class="literal">true</span> <span class="comment"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure><p>注意url填写你的pages网址不是仓库地址</p><ul><li>查找<strong>deploy</strong>字段，修改如下：  </li></ul><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"><span class="attr">repository:</span> <span class="string">git@github.com:SantaJiang/santajiang.github.io.git</span></span><br><span class="line"><span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>这里要<strong>注意</strong>两点！</p><ol><li>Github后续更新了默认主分支的名称，已经不叫<strong>master</strong>了，改为了<strong>main</strong>，如果还是写<strong>master</strong>，并不会报错，但是会在<strong>main</strong>分支之外新建一个<strong>master</strong>分支</li><li>repository一栏必须填ssh的地址，因为GitHub的密码验证于2021年8月13日不再支持，也就是不能再用密码方式去提交代码。要使用<strong>personal access token</strong>替代，当然这里我建议用SSH免密登陆，具体GitHub如何配置SSH免密登陆的步骤不在这里详述了，然后继续：</li></ol><ul><li>回到终端，执行 <code>npm install hexo-deployer-git --save</code> 只需执行一次，后续无需再执行</li><li>执行 <code>hexo d</code> 部署</li><li>登录 santajiang.github.io.git 查看效果</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;搭建时踩了很多坑，最主要的是很多文章的时效性不能保障了，按照文章的方法不能成功走完下来，特在此记录下最新的搭建流程，后续如有必要会持续更新&lt;/p&gt;</summary>
    
    
    
    <category term="博客搭建" scheme="https://santajiang.github.io/categories/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://santajiang.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
